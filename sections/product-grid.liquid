<div class="custom-product-grid-section">
    <div class="grid-container">
        <h2 class="grid-title">{{section.settings_title }} </h2>
        <div class="product-grid">
            {% for block in section.blocks %}
                {%if block.settings.product != blank  %}
                    {%assign product = all_products[block.settings.product] %}
                    <div class="product-card" data-product-handle="{{product.handle }}">
                        <div class="product.image">
                            {%if product.featured_image %}
                                <img src="{{product.featured_image | img-url: '600*600' }}" alt="{{product.title }}" loading="lazy">
                                {%else %}
                                <div class="no-image">No Image</div>
                            {%endif %}
                            <div class="product-overlay">
                                <button class="quick-view-btn" onclick="openProductPopup('{{product.handle }}')">
                                    Quick view
                                </button>
                            </div>
                        </div>
                    </div>
                {%endif %}
            {%endfor %}
        </div>
    </div>
</div>

{%comment %}
POP UP
{%endcomment %}

<div id="product-popup" class="popup-overlay">
    <div class="popup-content">
        <button class="popup-close" onclick="closeProductPopup()">&times;</button>
        <div class="popup-card">
            <div class="popup-image">
                <img id="popup-product-image" src=" " alt=" ">
            </div>
            <div class="popup-details">
                <h3 id="popup-product-title" class="popup-title"></h3>
                <div id="popup-product-price" class="popup-price"></div>
                <div id="popup-product-description" class="popup-description"></div>

                <form id="add-to-cart-form" class="popup-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Color</label>
                            <div class="color-option" id="color-options"></div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group size-group">
                            <label class="form-label">Size</label>
                            <select id="size-select" class="size-select">
                                <option value=""> Choose Your Size </option>
                            </select>
                        </div>
                    </div>

                    <button type="submit" class="add-to-cart-btn">
                        <span class="btn-text">ADD TO CART </span>
                        <span class="btn-arrow">-> </span>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>


<style>

    .custom-product-grid-section{
    
        padding: 60px 20px;
        background-color: #ffffff;

    }

    .grid-container{
    
        max-width:1200px;
        margin:0 auto;
    }

    .grid-title{
    
        font-size: 2.5rem;
        font-weight:900;
        text-align: center;
        margin-bottom: 50px;
        color: #000000;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .product-grid{
    
        display: grid;
        grid-template-columns: repeat(3,1fr);
        grid-template-rows: repeat(2,1fr);
        gap:20px;
        height:800px;
    }

    .product.card{
    
        background: #ffffff;
        border: 3px solid #000000;
        overflow:hidden;
        transition: all 0.3s ease;
        position:relative;
        cursor: pointer;
    }

    .product-card:hover{
    
        transform:translateY(-5px);
        box-shadow:8px 8px 0px #000000;
    }

    .product-image{
    
        position:relative;
        height:100%;
        overflow:hidden;
    }
    
    .prodcut-image img{
    
        width:100%;
        height:100%;
        object-fit:cover;
        transition: transform 0.3s ease;
    }

    .product-card:hover .product-image img{
    
        transform: scale(1.05)

    }

    .no.image{
    
        width:100%;
        height:100%;
        display: flex;
        align-items:center;
        justify-content:center;
        background: #f0f0f0;
        color: #666;
        font-weight:600;

    }

{%comment %}
Overlay styles
{%endcomment %}

    .product-overlay{
        
        position:absolute;
        top:0;
        left:0;
        right:0;
        bottom:0;
        background: rgba(0,0,0,0.8);
        display:flex;
        align-items:center;
        justify-content: center;
        opacity:0;
        transition: opacity 0.3s ease;
    }

    .prodcut-card:hover .product-overlay{
    
        opacity: 1;
    }

    .quick-view-btn{
    
        background: #ffffff;
        color: #000000;
        border:3px solid #000000;
        padding: 12px 24px;
        font-weight:700;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: 1px;
        letter-spacing: 1px;
        font-size: 0.9 rem;
    }

    .quick-view-btn:hover{
    
        background: #000000;
        color: #ffffff;
        transform: scale(1.05);
    }

/*Popup  styles*/

    .popup-overlay{
        
        position:fixed;
        top:0;
        left:0;
        width:100%;
        height:100%;
        background: rgba(0,0,0,0.8);
        display:none;
        align-items:center;
        justify-content: center;
        z-index:1000;
        opacity:0;
        transition: opacity 0.3s ease;
    
    }

    .popup-overlay.show{
    
        display:flex;
        opacity:1;
    }

    .popup-content{
     background: #ffffff;
     border-radius:12px;
     width:400px;
     max-height:90vh;
     max-width:90vw;
     position:relative;
     overflow:hidden;
     transform: scale(0.8);
     transition: transform 0.3s ease;
     box-shadow: 0 20 px 60px rgba(0, 0, 0 ,0.3);
    }

    .popup-overlay.show .popup-content{
    
        transform: scale(1);           
    }

    .popup-close{
    
        position: absolute;
        top:15px;
        right:15px;
        background: rgba(255,255,255,0.9);
        border:none;
        font-size:1.5rem;
        cursor: pointer;
        color: #000000;
        z-index: 1001;
        width:35px;
        height: 35px;
        display:flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        font-weight:bold;
        transition:all 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .popup-close:hover{
            
        background: rgba(0, 0, 0, 0.8);
        color: #ffffff;
    }
/*popup content style */
 
    .popup-card{
    
        display:flex;
        flex-direction:column;
    }

    .popup-image{
    
        width: 100%;
        height: 100;
        overflow: hidden;

    }

    .popup-image img{
    
        width: 100%;
        height: 100;
        object-fit: cover;

    }

    .popup-details {
    
        padding: 24px;
        display: flex;
        flex-direction: column;
        gap: 16px;
    }

    .popup-title{
    
        font-size: 1.1 rem;
        font-weight: 600;
        color: #000000;
        margin: 0;
        line-height:1.3;

    }

    .popup-price{
    
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .popup-price .price,
    .popup-price .price-sale
    {
        
        font-size: 1.1 rem;
        font-weight:700;
        color: #000000;
    }

    .popup-price .price-compare{
    
        font-size: 0.95rem;
        color: #999;
        text-decoration: line-through;
    }

    .popup-description {
    
        font-size: 0.85rem;
        line-height: 1.4;
        color: #666;
        margin: 0; 
    }

/*From style*/

    .popup-form{
    
        display:flex;
        flex-direction: column;
        gap: 20px
    }

    .form-row{
    
        display: flex;
        flex-direction: column;

    }

    .form-group{
    
        display:flex;
        flex-direction: column;
        gap: 8px;
    }

    .form-label{
    
        font-size: 0.9rem;
        font-size: 600;
        color: #000000;
        margin: 0;
    }

    .color-option{
    
        width: 60px;
        height: 35px;
        border: 2px solid #e5e5e5;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        transition: all 0.3s ease;
        background: #ffffff;
        color: #666;
    }

    .color-option:hover{
    
        border-color: #000000;
    }

    .color-option.selected{
    
        border-color: #000000;
        background: #000000;
        color: #ffffff;
    }

    .color-option.black { background: #000000; color: #ffffff}
    .color-option.blue { background: #1340af; color: #ffffff}
    .color-option.red { background: #dc2626; color: #ffffff}
    .color-option.grey { background: #6b7280; color: #ffffff}
    .color-option.white { background: #ffffff; color: #333; border-color: #e5e5e5}


/*Size select style*/
    .size-group{
    
        width:100%;
    }

    .size-select{
        
        width: 100%;
        padding: 12px 16px;
        padding-right: 40px;
        border: 2px solid #e5e5e5;
        cursor: pointer;
        justify-content: center;
        font-size: 0.9rem;
        font-weight: 500;
        letter-spacing: 0.5px;
        transition: all 0.3s ease;
        appearance: none;
        background: #ffffff;
        background-size: 16px;
        background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
        background-repeat:no-repeat;
        background-position: right 12px center;        
        color: #666;        
    }

    .size-select:focus{
    
        outline: none;
        border-color: #000000;
        color: #000000;
    }

    .size-select:not([value=""]){
    
        color: #000000;
        font-weight: 600;
    }

/*ADD to cart button style*/

    .add-to-cart-btn{

        width: 100%;
        height: 35px;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 0.9rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
        transition: all 0.3s ease;
        background: #000000;
        color: #ffffff;
        margin-top: 8px;
    }

    .add-to-cart-btn:hover{
    
        background: #cccccc;
        transform: translateY(-1px);

    }

    .add-to-cart-btn:disabled{
    
        background: #cccccc;
        cursor: not-allowed;
        transform: none;
    }

    .btn-text{
    
        flex:1;
        text-align: center
    }
    
    .btn-arrow{
    
        font-size: 1.2rem;
        transition: transform 0.3s ease;
    }

    .add-to-cart-btn:hover .btn-arrow{
        
        transform: translateX(3px);

    }

/* RESPONSIVE */

    @media (max-width: 768px){
        
        .custom-product-grid-section{
        
            padding: 40px 15px;
        }

        .gird-title{
        
            font-size:2rem;
            margin-bottom: 30px;

        }
    
        .product-grid{
        
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 15px;
            height: 600px;
        }
    
    }

    @media(max-width 480px){
        .product-grid {
        
            grid-template-columns: 1fr;
            grid-template-rows: repeat(6, 1fr);
            gap: 10px;
            height: 1200px;
        
        }

        .popup-content{
        
            width: 95%;
            margin:10px;

        }

        .popup-details{
        
            padding:20px 15px;
        }

        .grid-title{
            font-size: 1.5rem;
        }
    
    }
    
</style>

